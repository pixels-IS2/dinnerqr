<%= form_with(model: order, local: true) do |form| %>
  

  <div id="accordion" role="tablist">
    <% count = 1 %>
    <% count2 = 1 %>
    <% @specialities.each do |speciality| %>

        <div class="card">

          <div class="card-header" role="tab" id="heading<%= count %>">
            <h5 class="mb-0">
              <a data-toggle="collapse" href="#collapse<%= count %>" aria-expanded="true" aria-controls="collapse<%= count %>">
                 <%= speciality.name %>
              </a>
            </h5>
          </div>
          <div id="collapse<%= count %>" class="collapse show" role="tabpanel" aria-labelledby="heading<%= count %>" data-parent="#accordion">
            <div class="card-body">
              <table class="table table-inverse">



              <tbody>
              <% dishes = speciality.dishes %>
              <% dishes.each do |dish| %>
                <% if not dish.state.eql?('Discount') %>

                    <tr>
                      <td><%= check_box_tag "orderdishes[order#{count2}][id]", dish.id %></td>
                      <td><%= link_to dish.name, dish %></td>
                      <td><%= dish.description %></td>
                      <td><%= dish.price %></td>
                      <td><%= number_field_tag "orderdishes[order#{count2}][quantity]", nil, min: 0 %></td>
                      <td><%= text_field_tag "orderdishes[order#{count2}][specification]",nil  %></td>


                      <% count2 = count2 +1 %>
                    </tr>
                <% end %>
              <% end %>
              <% count = count+1 %>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    <%end%>
    <div class="actions">
      <%= form.submit "submit",type:"submit",class:"btn btn-lg btn-template-primary"%>
    </div>
  </div>

  
<% end %>
